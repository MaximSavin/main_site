<template>
  <!-- prettier-ignore -->
  <div class="uk-width-1-1 uk-overflow-hidden uk-margin-medium-top">
    <div uk-slider="finite: true; draggable: true; sets: false">
      <div class="uk-position-relative">
        <div class="uk-slider-container">
          <ul class="uk-slider-items uk-child-width-1-2 uk-child-width-auto@m uk-grid" uk-height-match=".uk-card-body">
            <li v-for="news in newsItems">
              <div>
                <div class="uk-card uk-card-default box-shadow-none">
                  <div class="uk-card-media-top uk-cover-container">
                    <img :src="'https://strapi.galaxyonline.io' + news.cover.url" uk-cover/>
                  </div>
                  <div class="uk-card-body">
                    <h3 class="uk-card-title uk-flex">{{ news.title }}</h3>
                    <div class="uk-grid uk-grid-small" uk-grid>
                      <div class="uk-width-expand@s uk-width-1-1 uk-flex-first@s uk-flex-last">
                        <a href="#" class="uk-button uk-button-default uk-button-hover-blue uk-width-auto@s uk-width-1-1">{{ t('message.know_more') }}</a>
                      </div>
                      <div class="uk-width-auto uk-text-small uk-flex uk-flex-middle"><svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.17876 0.674495C0.786101 0.780379 0.417673 1.09177 0.217313 1.48719C0.0318594 1.85314 0.00298928 2.10777 0.00224196 3.38384L0.0015733 4.55399H9.4832H18.9649L18.9525 3.30518L18.9402 2.05637L18.8131 1.78792C18.5626 1.25906 17.9693 0.808147 17.3518 0.677248C17.1701 0.638742 16.8037 0.621868 16.1378 0.621396L15.184 0.620728L15.1837 1.51554C15.1836 2.00771 15.1661 2.4731 15.1448 2.54975C15.1235 2.62645 15.0445 2.74886 14.9693 2.82174C14.857 2.93057 14.7953 2.95732 14.6247 2.97101C14.4541 2.98469 14.393 2.9712 14.2829 2.89568C13.9852 2.69135 13.9858 2.69379 13.9714 1.60125L13.9586 0.620728H9.2417H4.52482L4.52309 1.47621C4.52104 2.50236 4.50161 2.62893 4.31781 2.81273C4.05991 3.07064 3.60554 3.01848 3.41301 2.70889C3.32931 2.57434 3.32459 2.52195 3.31287 1.59421L3.30052 0.620728L2.32955 0.623363C1.69173 0.625133 1.29687 0.642675 1.17876 0.674495ZM0.0106198 11.4274L0.0212396 17.0814L0.123032 17.3428C0.31647 17.8395 0.623579 18.1504 1.07736 18.3087C1.2697 18.3759 1.68414 18.3794 9.3234 18.3794H17.3669L17.63 18.2885C18.1671 18.1029 18.6305 17.7134 18.8538 17.2599L18.9795 17.0044L18.9898 11.3888L19 5.7733H9.5H0L0.0106198 11.4274ZM5.54369 8.02568C5.59569 8.05238 5.67534 8.12417 5.72069 8.18517C5.79692 8.28779 5.80407 8.35639 5.81583 9.09733C5.8274 9.82672 5.82158 9.91435 5.7507 10.0746C5.61323 10.3853 5.57823 10.3949 4.57867 10.3949C3.34012 10.3949 3.38559 10.441 3.38477 9.18343C3.3839 7.92723 3.33186 7.9795 4.58382 7.97808C5.19509 7.97738 5.47691 7.99134 5.54369 8.02568ZM10.2243 8.02568C10.2763 8.05238 10.3559 8.12417 10.4013 8.18521C10.4777 8.28799 10.4846 8.35583 10.496 9.10953C10.5097 10.012 10.4828 10.1723 10.294 10.3124C10.1889 10.3905 10.1351 10.3949 9.28406 10.3949C8.01665 10.3949 8.06617 10.4441 8.06534 9.18343C8.06448 7.92723 8.01244 7.9795 9.2644 7.97808C9.87566 7.97738 10.1575 7.99134 10.2243 8.02568ZM14.9886 8.03559C15.205 8.14749 15.2233 8.23788 15.2233 9.19523C15.2233 10.4561 15.2854 10.3949 14.0079 10.3949C13.1441 10.3949 13.1154 10.3923 12.9925 10.3047C12.8121 10.176 12.7851 10.0279 12.7849 9.16447C12.7846 8.33609 12.8089 8.21274 13.0015 8.06119C13.1054 7.97946 13.1467 7.97592 13.9916 7.97592C14.7027 7.97592 14.8955 7.98745 14.9886 8.03559ZM5.61492 13.3957C5.79475 13.5239 5.82232 13.6728 5.82256 14.5162C5.8228 15.3175 5.80097 15.4287 5.60843 15.6064C5.50235 15.7044 5.49874 15.7048 4.61828 15.7167C3.78297 15.728 3.72743 15.7242 3.60334 15.6475C3.39228 15.5171 3.37859 15.4399 3.39189 14.4556C3.40372 13.5752 3.40471 13.5664 3.50001 13.465C3.55291 13.4088 3.65026 13.3464 3.71634 13.3265C3.78242 13.3065 4.20819 13.2936 4.66249 13.2978C5.45441 13.3052 5.4937 13.3092 5.61492 13.3957ZM10.2707 13.3746C10.4696 13.5097 10.4837 13.5845 10.4837 14.5012C10.4837 14.9685 10.4699 15.4 10.4531 15.4602C10.4364 15.5203 10.3656 15.6043 10.2958 15.6468C10.1798 15.7176 10.0945 15.7242 9.29193 15.7243C8.00245 15.7245 8.05523 15.7789 8.07254 14.4669C8.08434 13.5744 8.08517 13.5665 8.18059 13.4651C8.23349 13.4088 8.33084 13.3464 8.39692 13.3265C8.463 13.3065 8.88877 13.2936 9.34306 13.2978C10.0579 13.3045 10.1827 13.3148 10.2707 13.3746ZM14.8722 13.3253C14.9495 13.3468 15.0557 13.4101 15.1082 13.4659L15.2036 13.5675V14.5271V15.4867L15.0945 15.5957L14.9855 15.7048H14.0259H13.0663L12.9642 15.6088C12.7996 15.4542 12.7773 15.3008 12.7914 14.4194C12.8097 13.2698 12.7868 13.2915 13.9843 13.2883C14.3953 13.2872 14.7949 13.3038 14.8722 13.3253Z" fill="white" fill-opacity="0.4"/></svg>
                        {{ moment(news.published_at).format("DD.MM.YYYY") }}
                      </div>
                      <div class="uk-width-auto uk-text-small uk-flex uk-flex-middle"><svg width="23" height="17" viewBox="0 0 23 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.1405 0.505065C8.62509 0.578344 6.11029 1.4756 4.10816 3.01404C2.39356 4.3315 0.979138 6.16292 0.158217 8.12846L0 8.50725L0.158217 8.88604C1.72987 12.649 5.09058 15.434 9.06887 16.2705C10.5315 16.578 12.4691 16.5764 13.9536 16.2664C17.9074 15.4408 21.2704 12.6484 22.8418 8.88604L23 8.50725L22.8418 8.12846C22.0222 6.166 20.6606 4.39266 18.9536 3.06404C16.7323 1.3351 13.9482 0.423246 11.1405 0.505065ZM12.4017 3.25339C13.509 3.46799 14.4151 3.95179 15.1868 4.74018C16.1822 5.75741 16.7125 7.06651 16.7125 8.50725C16.7125 9.94799 16.1822 11.2571 15.1868 12.2743C14.1912 13.2915 12.91 13.8333 11.5 13.8333C10.09 13.8333 8.80878 13.2915 7.81325 12.2743C6.81775 11.2571 6.28751 9.94799 6.28751 8.50725C6.28751 7.06651 6.81775 5.75741 7.81325 4.74018C8.80542 3.7264 10.0576 3.19242 11.4614 3.18443C11.8034 3.1825 12.1774 3.20991 12.4017 3.25339ZM10.9383 5.35896C10.2507 5.49781 9.7744 5.76039 9.27499 6.27591C8.66562 6.90494 8.38212 7.61339 8.38212 8.50725C8.38212 9.41662 8.66499 10.1128 9.29683 10.7584C9.92871 11.404 10.61 11.693 11.5 11.693C12.39 11.693 13.0713 11.404 13.7032 10.7584C14.335 10.1128 14.6179 9.41662 14.6179 8.50725C14.6179 7.59787 14.335 6.90172 13.7032 6.25608C13.1128 5.65286 12.4735 5.36241 11.6348 5.3164C11.4052 5.30382 11.1274 5.32076 10.9383 5.35896Z" fill="white" fill-opacity="0.4"/></svg>
                        120
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <a class="uk-position-center-left uk-position-small uk-slidenav uk-visible@m" href="#" uk-slider-item="previous">
          <svg width="13.6" height="23.2" viewBox="0 0 17 29" fill="none" version="1.1" id="svg4" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path d="M 0.72172781,15.5926 13.182118,28.0528 c 0.28819,0.2884 0.67291,0.4473 1.08312,0.4473 0.41021,0 0.79492,-0.1589 1.08312,-0.4473 l 0.91762,-0.9174 c 0.597104,-0.5978 0.597104,-1.5693 0,-2.1662 L 5.8026278,14.5059 16.277588,4.03093 c 0.288194,-0.28842 0.447316,-0.67291 0.447316,-1.08289 0,-0.41044 -0.159122,-0.79493 -0.447316,-1.08358 l -0.91762,-0.917164 c -0.28843,-0.288421 -0.67291,-0.447315 -1.08312,-0.447315 -0.41021,0 -0.79493,0.158894 -1.08312,0.447315 L 0.72172781,13.4189 c -0.2889,0.2893 -0.4476,0.6756 -0.4467,1.0863 -9e-4,0.4122 0.1578,0.7983 0.4467,1.0874 z" fill="white" id="path2" style="fill: #ffffff; fill-opacity: 1"/></svg>
        </a>
        <a class="uk-position-center-right uk-position-small uk-slidenav uk-visible@m" href="#" uk-slider-item="next">
          <svg width="13.6" height="23.2" viewBox="0 0 17 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.2782 15.5926L3.81781 28.0528C3.52962 28.3412 3.1449 28.5001 2.73469 28.5001C2.32448 28.5001 1.93977 28.3412 1.65157 28.0528L0.73395 27.1354C0.136846 26.5376 0.136846 25.5661 0.73395 24.9692L11.1973 14.5059L0.72234 4.03093C0.434146 3.74251 0.275024 3.35802 0.275024 2.94804C0.275024 2.5376 0.434146 2.15311 0.72234 1.86446L1.63996 0.947296C1.92839 0.658875 2.31287 0.499981 2.72308 0.499981C3.13329 0.499981 3.51801 0.658875 3.8062 0.947296L16.2782 13.4189C16.5671 13.7082 16.7258 14.0945 16.7249 14.5052C16.7258 14.9174 16.5671 15.3035 16.2782 15.5926Z" fill="white"/></svg>
        </a>
      </div>
    </div>
  </div>
  
</template>

<script>
export default {
  name: "news-items",
};
</script>

<script setup>
import { ref, watch, computed } from "vue";
import { useFetch } from "@vueuse/core";
import { useI18n } from "vue-i18n";
import moment from "moment";
// import { getCurrentInstance } from 'vue'

// const app= getCurrentInstance()
//     console.log(app.appContext.config) 

const { t, locale } = useI18n({ useScope: "global" });

// 'https://strapi.galaxyonline.io/news-items?_where[locale]=ru'
// 'https://strapi.galaxyonline.io/news-items?_locale=ru'
const url = ref(
  "https://strapi.galaxyonline.io/news-items?_sort=id:ASC&_locale=" + locale.value
);
const { data: newsItems } = useFetch(url, { refetch: true }).json();

// const newsItems = data

// const { isFinished, data } = useFetch(url, { refetch: true }).json()
// const newsItems = ref([])
// watch([isFinished, data], ([isFinished, data]) => {
//   if (!isFinished) {
//     return
//   } else {
//     // newsItems.value.push(...data) // добавить дальше
//     newsItems.value = [...data] // заменить массив
//   }
// })

watch([locale, url], () => {
  url.value = "https://strapi.galaxyonline.io/news-items?_sort=id:ASC&_locale=" + locale.value;
});
</script>

<style></style>
